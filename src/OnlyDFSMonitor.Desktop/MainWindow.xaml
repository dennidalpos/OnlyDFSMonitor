<Window x:Class="OnlyDFSMonitor.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OnlyDFSMonitor" Height="760" Width="1220">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <GroupBox Header="Windows Service" Margin="0,0,0,8">
            <Grid Margin="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,0" Text="Service EXE path"/>
                <TextBox x:Name="ServiceBinaryPathBox" Grid.Row="0" Grid.Column="1" Margin="0,0,8,0" Text="C:\OnlyDFSMonitor\OnlyDFSMonitor.Service.exe"/>
                <TextBlock x:Name="ServiceStatusText" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Text="Status: checking..." FontWeight="SemiBold"/>

                <WrapPanel Grid.Row="1" Grid.ColumnSpan="3" Margin="0,8,0,0">
                    <Button Width="120" Margin="0,0,8,0" Click="InstallService_Click">Install</Button>
                    <Button Width="120" Margin="0,0,8,0" Click="UninstallService_Click">Uninstall</Button>
                    <Button Width="100" Margin="0,0,8,0" Click="StartService_Click">Start</Button>
                    <Button Width="100" Margin="0,0,8,0" Click="StopService_Click">Stop</Button>
                    <Button Width="160" Click="RefreshServiceStatus_Click">Refresh service status</Button>
                </WrapPanel>
            </Grid>
        </GroupBox>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <GroupBox Header="Configuration" Margin="0,0,8,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <WrapPanel Margin="0,0,0,8">
                            <Button Width="170" Margin="0,0,8,0" Click="CollectNow_Click">Collect Now (Auto)</Button>
                            <Button Width="150" Margin="0,0,8,0" Click="SaveConfiguration_Click">Save Configuration</Button>
                            <Button Width="130" Margin="0,0,8,0" Click="ImportConfig_Click">Import Config</Button>
                            <Button Width="130" Click="ExportConfig_Click">Export Config</Button>
                        </WrapPanel>

                        <TextBlock Text="Config path"/>
                        <TextBox x:Name="ConfigPathBox" Text="C:\OnlyDFSMonitor\config\config.json" Margin="0,0,0,8"/>
                        <TextBlock Text="Snapshot path"/>
                        <TextBox x:Name="SnapshotPathBox" Text="C:\OnlyDFSMonitor\status\latest.json" Margin="0,0,0,8"/>
                        <TextBlock Text="Collect-now command path"/>
                        <TextBox x:Name="CommandPathBox" Text="C:\OnlyDFSMonitor\commands\collect-now.json" Margin="0,0,0,8"/>
                        <TextBlock Text="UNC root (optional)"/>
                        <TextBox x:Name="UncRootBox" Text="\\fileserver\dfs-monitor" Margin="0,0,0,8"/>

                        <CheckBox x:Name="AutoDiscoverDfsrGroupsCheckBox"
                                  Content="Auto-discover DFS-R groups from collector host"
                                  IsChecked="True"
                                  Margin="0,0,0,6"
                                  Checked="AutoDiscoverDfsrGroupsCheckBox_OnChanged"
                                  Unchecked="AutoDiscoverDfsrGroupsCheckBox_OnChanged"/>

                        <TextBlock Text="Manual DFS-R groups (one per line)"/>
                        <TextBox x:Name="DfsrGroupsBox" AcceptsReturn="True" Height="70" Margin="0,0,0,8"/>

                        <CheckBox x:Name="IncludeDisabledNamespacesCheckBox"
                                  Content="Include disabled namespaces during local collect"
                                  IsChecked="False"
                                  Margin="0,0,0,6"
                                  Checked="IncludeDisabledNamespacesCheckBox_OnChanged"
                                  Unchecked="IncludeDisabledNamespacesCheckBox_OnChanged"/>

                        <TextBlock Text="Namespaces (prefix each line with [x] enabled or [ ] disabled)"/>
                        <TextBox x:Name="NamespacesBox" AcceptsReturn="True" Height="150" Text="[x] \\domain.local\dfs\Public" Margin="0,0,0,8"/>

                        <Separator Margin="0,4,0,8"/>
                        <TextBlock Text="Snapshot filters" FontWeight="SemiBold" Margin="0,0,0,6"/>
                        <WrapPanel>
                            <CheckBox x:Name="ShowOkCheckBox" Content="OK" IsChecked="True" Margin="0,0,12,0" Checked="SnapshotFilterCheckBox_OnChanged" Unchecked="SnapshotFilterCheckBox_OnChanged"/>
                            <CheckBox x:Name="ShowWarnCheckBox" Content="Warn" IsChecked="True" Margin="0,0,12,0" Checked="SnapshotFilterCheckBox_OnChanged" Unchecked="SnapshotFilterCheckBox_OnChanged"/>
                            <CheckBox x:Name="ShowCriticalCheckBox" Content="Critical" IsChecked="True" Margin="0,0,12,0" Checked="SnapshotFilterCheckBox_OnChanged" Unchecked="SnapshotFilterCheckBox_OnChanged"/>
                            <CheckBox x:Name="ShowUnknownCheckBox" Content="Unknown" IsChecked="True" Checked="SnapshotFilterCheckBox_OnChanged" Unchecked="SnapshotFilterCheckBox_OnChanged"/>
                        </WrapPanel>
                        <Button Width="220" Margin="0,8,0,0" Click="ImportSnapshot_Click">Import Snapshot for Filtering</Button>
                    </StackPanel>
                </ScrollViewer>
            </GroupBox>

            <TabControl Grid.Column="1">
                <TabItem Header="Status">
                    <TextBox x:Name="LogBox" Margin="8" IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                </TabItem>
                <TabItem Header="Filtered Snapshot">
                    <TextBox x:Name="SnapshotViewBox" Margin="8" IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" FontFamily="Consolas"/>
                </TabItem>
            </TabControl>
        </Grid>

        <TextBlock x:Name="FooterText" Grid.Row="2" Margin="0,8,0,0" Text="Ready"/>
    </Grid>
</Window>
